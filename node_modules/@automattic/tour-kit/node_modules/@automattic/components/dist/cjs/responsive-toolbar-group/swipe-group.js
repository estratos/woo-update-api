"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const jsx_runtime_1 = require("react/jsx-runtime");
const components_1 = require("@wordpress/components");
const clsx_1 = tslib_1.__importDefault(require("clsx"));
const react_1 = require("react");
require("./style.scss");
const ToolbarButton = components_1.ToolbarButton;
function SwipeGroup({ children, className = '', onClick = () => null, initialActiveIndex = -1, hrefList = [], }) {
    const classes = (0, clsx_1.default)('responsive-toolbar-group__swipe', className);
    const [activeIndex, setActiveIndex] = (0, react_1.useState)(initialActiveIndex);
    // Set active on prop change from above
    (0, react_1.useEffect)(() => {
        setActiveIndex(initialActiveIndex);
    }, [initialActiveIndex]);
    const ref = (0, react_1.useRef)(null);
    // Scroll to category on load
    (0, react_1.useEffect)(() => {
        if (ref.current) {
            ref.current.scrollIntoView({ block: 'end', inline: 'center' });
        }
    }, []);
    // Scroll to the beginning when activeIndex changes to 0. This indicates a state reset.
    (0, react_1.useEffect)(() => {
        if (ref.current && activeIndex === 0) {
            ref.current.scrollIntoView({ block: 'end', inline: 'center' });
        }
    }, [activeIndex]);
    return ((0, jsx_runtime_1.jsx)("div", { className: classes, children: (0, jsx_runtime_1.jsx)(components_1.ToolbarGroup, { className: "responsive-toolbar-group__swipe-list", children: children.map((child, index) => ((0, jsx_runtime_1.jsx)(ToolbarButton, { id: `button-item-${index}`, isActive: activeIndex === index, href: hrefList[index], ref: activeIndex === index ? ref : null, onClick: (event) => {
                    setActiveIndex(index);
                    onClick(index);
                    if (typeof hrefList[index] === 'string') {
                        event.preventDefault();
                    }
                }, className: "responsive-toolbar-group__swipe-item", children: child }, `button-item-${index}`))) }) }));
}
exports.default = SwipeGroup;
//# sourceMappingURL=swipe-group.js.map