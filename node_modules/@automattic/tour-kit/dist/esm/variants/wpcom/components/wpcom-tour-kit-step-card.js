import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { getMediaQueryList, isMobile, MOBILE_BREAKPOINT } from '@automattic/viewport';
import { Button, Card, CardBody, CardFooter, CardMedia } from '@wordpress/components';
import { Icon } from '@wordpress/icons';
import { useI18n } from '@wordpress/react-i18n';
import classnames from 'classnames';
import WpcomTourKitRating from './wpcom-tour-kit-rating';
import WpcomTourKitStepCardNavigation from './wpcom-tour-kit-step-card-navigation';
import WpcomTourKitStepCardOverlayControls from './wpcom-tour-kit-step-card-overlay-controls';
const WpcomTourKitStepCard = ({ steps, currentStepIndex, onMinimize, onDismiss, onGoToStep, onNextStep, onPreviousStep, setInitialFocusedElement, }) => {
    const { __ } = useI18n();
    const lastStepIndex = steps.length - 1;
    const { descriptions, heading, imgSrc, imgLink } = steps[currentStepIndex].meta;
    const isLastStep = currentStepIndex === lastStepIndex;
    const description = descriptions[isMobile() ? 'mobile' : 'desktop'] ?? descriptions.desktop;
    // @todo check why the assertion is needed here to pass TS
    const mediaQueryList = getMediaQueryList(MOBILE_BREAKPOINT);
    return (_jsxs(Card, { className: "wpcom-tour-kit-step-card", isElevated: true, children: [_jsx(WpcomTourKitStepCardOverlayControls, { onDismiss: onDismiss, onMinimize: onMinimize }), imgSrc && (_jsxs(CardMedia, { className: "wpcom-tour-kit-step-card__media", children: [_jsxs("picture", { children: [imgSrc.mobile && (_jsx("source", { srcSet: imgSrc.mobile.src, type: imgSrc.mobile.type, media: mediaQueryList?.media })), _jsx("img", { alt: __('Tour Media', __i18n_text_domain__), src: imgSrc.desktop?.src })] }), imgLink && (_jsx("a", { className: classnames('wpcom-tour-kit-step-card__media-link', {
                            'wpcom-tour-kit-step-card__media-link--playable': imgLink.playable,
                        }), href: imgLink.href, target: "_blank", rel: "noreferrer noopener", onClick: imgLink.onClick, children: _jsx(Icon, { icon: _jsx("svg", { width: "27", height: "32", viewBox: "0 0 27 32", fill: "none", xmlns: "http://www.w3.org/2000/svg", children: _jsx("path", { d: "M27 16L-1.4682e-06 31.5885L-1.05412e-07 0.411542L27 16Z", fill: "white" }) }), size: 27 }) }))] })), _jsxs(CardBody, { children: [_jsx("h2", { className: "wpcom-tour-kit-step-card__heading", children: heading }), _jsxs("p", { className: "wpcom-tour-kit-step-card__description", children: [description, isLastStep ? (_jsx(Button, { className: "wpcom-tour-kit-step-card__description", variant: "tertiary", onClick: () => onGoToStep(0), ref: setInitialFocusedElement, children: __('Restart tour', __i18n_text_domain__) })) : null] })] }), _jsx(CardFooter, { children: isLastStep ? (_jsx(WpcomTourKitRating, {})) : (_jsx(WpcomTourKitStepCardNavigation, { currentStepIndex: currentStepIndex, onDismiss: onDismiss, onGoToStep: onGoToStep, onNextStep: onNextStep, onPreviousStep: onPreviousStep, setInitialFocusedElement: setInitialFocusedElement, steps: steps })) })] }));
};
export default WpcomTourKitStepCard;
//# sourceMappingURL=wpcom-tour-kit-step-card.js.map