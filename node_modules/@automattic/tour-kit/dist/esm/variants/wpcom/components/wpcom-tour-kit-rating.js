import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import { Button } from '@wordpress/components';
import { useState } from '@wordpress/element';
import { useI18n } from '@wordpress/react-i18n';
import classNames from 'classnames';
import { useTourKitContext } from '../../../index';
import thumbsDown from '../icons/thumbs_down';
import thumbsUp from '../icons/thumbs_up';
const WpcomTourKitRating = () => {
    const [tempRating, setTempRating] = useState();
    const context = useTourKitContext();
    const config = context.config;
    const tourRating = config.options?.tourRating?.useTourRating?.() ?? tempRating;
    const { __ } = useI18n();
    let isDisabled = false;
    if (!config.options?.tourRating?.enabled) {
        return null;
    }
    // check is on tempRating to allow rerating in a restarted tour
    if (!isDisabled && tempRating !== undefined) {
        isDisabled = true;
    }
    const rateTour = (isThumbsUp) => {
        if (isDisabled) {
            return;
        }
        const rating = isThumbsUp ? 'thumbs-up' : 'thumbs-down';
        if (rating !== tourRating) {
            isDisabled = true;
            setTempRating(rating);
            config.options?.tourRating?.onTourRate?.(rating);
        }
    };
    return (_jsxs(_Fragment, { children: [_jsx("p", { className: "wpcom-tour-kit-rating__end-text", children: __('Did you find this guide helpful?', __i18n_text_domain__) }), _jsxs("div", { children: [_jsx(Button, { "aria-label": __('Rate thumbs up', __i18n_text_domain__), className: classNames('wpcom-tour-kit-rating__end-icon', {
                            active: tourRating === 'thumbs-up',
                        }), disabled: isDisabled, icon: thumbsUp, onClick: () => rateTour(true), iconSize: 24 }), _jsx(Button, { "aria-label": __('Rate thumbs down', __i18n_text_domain__), className: classNames('wpcom-tour-kit-rating__end-icon', {
                            active: tourRating === 'thumbs-down',
                        }), disabled: isDisabled, icon: thumbsDown, onClick: () => rateTour(false), iconSize: 24 })] })] }));
};
export default WpcomTourKitRating;
//# sourceMappingURL=wpcom-tour-kit-rating.js.map