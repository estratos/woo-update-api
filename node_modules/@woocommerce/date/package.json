{
  "name": "@woocommerce/date",
  "version": "4.2.0",
  "description": "WooCommerce date utilities.",
  "author": "Automattic",
  "license": "GPL-3.0-or-later",
  "keywords": [
    "wordpress",
    "woocommerce",
    "date"
  ],
  "homepage": "https://github.com/woocommerce/woocommerce/tree/trunk/packages/js/date/README.md",
  "repository": {
    "type": "git",
    "url": "https://github.com/woocommerce/woocommerce.git"
  },
  "bugs": {
    "url": "https://github.com/woocommerce/woocommerce/issues"
  },
  "main": "build/index.js",
  "module": "build-module/index.js",
  "types": "build-types",
  "react-native": "src/index",
  "dependencies": {
    "@types/d3-time-format": "^2.3.0",
    "@wordpress/date": "^4.3.1",
    "@wordpress/i18n": "^4.3.1",
    "moment": "^2.29.1",
    "moment-timezone": "^0.5.34",
    "qs": "^6.10.3"
  },
  "devDependencies": {
    "@babel/core": "^7.17.5",
    "@woocommerce/eslint-plugin": "2.2.0",
    "d3-time-format": "^2.3.0",
    "eslint": "^8.12.0",
    "jest": "^27.5.1",
    "jest-cli": "^27.5.1",
    "require-turbo": "0.0.0",
    "rimraf": "^3.0.2",
    "ts-jest": "^27.1.3",
    "typescript": "^4.6.2"
  },
  "peerDependencies": {
    "lodash": "^4.17.0"
  },
  "publishConfig": {
    "access": "public"
  },
  "lint-staged": {
    "*.(t|j)s?(x)": [
      "pnpm lint:fix",
      "pnpm test-staged"
    ]
  },
  "scripts": {
    "changelog": "composer exec -- changelogger",
    "clean": "pnpm exec rimraf tsconfig.tsbuildinfo build build-*",
    "build": "node ./node_modules/require-turbo && tsc --build ./tsconfig.json ./tsconfig-cjs.json",
    "start": "tsc --build --watch",
    "lint": "node ./node_modules/require-turbo && eslint src",
    "lint:fix": "eslint src --fix",
    "test": "node ./node_modules/require-turbo && jest --config ./jest.config.json",
    "test-staged": "jest --bail --config ./jest.config.json --findRelatedTests"
  },
  "readme": "# Date\n\nA collection of utilities to display and work with date values.\n\n## Installation\n\nInstall the module\n\n```bash\npnpm install @woocommerce/date --save\n```\n\n_This package assumes that your code will run in an **ES2015+** environment. If you're using an environment that has limited or no support for ES2015+ such as lower versions of IE then using [core-js](https://github.com/zloirock/core-js) or [@babel/polyfill](https://babeljs.io/docs/en/next/babel-polyfill) will add support for these methods. Learn more about it in [Babel docs](https://babeljs.io/docs/en/next/caveats)._\n\n## Usage\n\nThe `date` package makes use of the global `window.wcSettings.timeZone`.  If a timezone is set, the current and last periods will be converted from your browser's timezone to the store timezone.  If none is set, these periods will be based on your browser's timezone.\n\n### Functions\n\n<dl>\n<dt><a href=\"#appendTimestamp\">appendTimestamp</a> ⇒ <code>string</code></dt>\n<dd><p>Adds timestamp to a string date.</p>\n</dd>\n<dt><a href=\"#getDateValue\">getDateValue</a> ⇒ <code><a href=\"#DateValue\">DateValue</a></code></dt>\n<dd><p>Get a DateValue object for a period described by a period, compare value, and start/end\ndates, for custom dates.</p>\n</dd>\n<dt><a href=\"#getDateParamsFromQueryMemoized\">getDateParamsFromQueryMemoized</a> ⇒ <code>Object</code></dt>\n<dd><p>Memoized internal logic of getDateParamsFromQuery().</p>\n</dd>\n<dt><a href=\"#getDateParamsFromQuery\">getDateParamsFromQuery</a> ⇒ <code><a href=\"#DateParams\">DateParams</a></code></dt>\n<dd><p>Add default date-related parameters to a query object</p>\n</dd>\n<dt><a href=\"#getCurrentDatesMemoized\">getCurrentDatesMemoized</a> ⇒ <code>Object</code></dt>\n<dd><p>Memoized internal logic of getCurrentDates().</p>\n</dd>\n<dt><a href=\"#getCurrentDates\">getCurrentDates</a> ⇒ <code>Object</code></dt>\n<dd><p>Get Date Value Objects for a primary and secondary date range</p>\n</dd>\n<dt><a href=\"#getDateDifferenceInDays\">getDateDifferenceInDays</a> ⇒ <code>number</code></dt>\n<dd><p>Calculates the date difference between two dates. Used in calculating a matching date for previous period.</p>\n</dd>\n<dt><a href=\"#getPreviousDate\">getPreviousDate</a> ⇒ <code>Object</code></dt>\n<dd><p>Get the previous date for either the previous period of year.</p>\n</dd>\n</dl>\n<dl>\n<dt><a href=\"#toMoment\">toMoment(format, str)</a> ⇒ <code>Object</code> | <code>null</code></dt>\n<dd><p>Convert a string to Moment object</p>\n</dd>\n<dt><a href=\"#getRangeLabel\">getRangeLabel(after, before)</a> ⇒ <code>string</code></dt>\n<dd><p>Given two dates, derive a string representation</p>\n</dd>\n<dt><a href=\"#getStoreTimeZoneMoment\">getStoreTimeZoneMoment()</a> ⇒ <code>string</code></dt>\n<dd><p>Gets the current time in the store time zone if set.</p>\n</dd>\n<dt><a href=\"#getLastPeriod\">getLastPeriod(period, compare)</a> ⇒ <code><a href=\"#DateValue\">DateValue</a></code></dt>\n<dd><p>Get a DateValue object for a period prior to the current period.</p>\n</dd>\n<dt><a href=\"#getCurrentPeriod\">getCurrentPeriod(period, compare)</a> ⇒ <code><a href=\"#DateValue\">DateValue</a></code></dt>\n<dd><p>Get a DateValue object for a curent period. The period begins on the first day of the period,\nand ends on the current day.</p>\n</dd>\n<dt><a href=\"#getAllowedIntervalsForQuery\">getAllowedIntervalsForQuery(query, defaultDateRange)</a> ⇒ <code>Array</code></dt>\n<dd><p>Returns the allowed selectable intervals for a specific query.</p>\n</dd>\n<dt><a href=\"#getIntervalForQuery\">getIntervalForQuery(query, defaultDateRange)</a> ⇒ <code>string</code></dt>\n<dd><p>Returns the current interval to use.</p>\n</dd>\n<dt><a href=\"#getChartTypeForQuery\">getChartTypeForQuery(query)</a> ⇒ <code>string</code></dt>\n<dd><p>Returns the current chart type to use.</p>\n</dd>\n<dt><a href=\"#getDateFormatsForInterval\">getDateFormatsForInterval(interval, [ticks], [option])</a> ⇒ <code>string</code></dt>\n<dd><p>Returns date formats for the current interval.</p>\n</dd>\n<dt><a href=\"#getDateFormatsForIntervalD3\">getDateFormatsForIntervalD3(interval, [ticks])</a> ⇒ <code>string</code></dt>\n<dd><p>Returns d3 date formats for the current interval.\nSee <a href=\"https://github.com/d3/d3-time-format\">https://github.com/d3/d3-time-format</a> for chart formats.</p>\n</dd>\n<dt><a href=\"#getDateFormatsForIntervalPhp\">getDateFormatsForIntervalPhp(interval, [ticks])</a> ⇒ <code>string</code></dt>\n<dd><p>Returns php date formats for the current interval.\nSee see <a href=\"https://www.php.net/manual/en/datetime.format.php\">https://www.php.net/manual/en/datetime.format.php</a>.</p>\n</dd>\n<dt><a href=\"#loadLocaleData\">loadLocaleData(config)</a></dt>\n<dd><p>Gutenberg&#39;s moment instance is loaded with i18n values, which are\nPHP date formats, ie &#39;LLL: &quot;F j, Y g:i a&quot;&#39;. Override those with translations\nof moment style js formats.</p>\n</dd>\n<dt><a href=\"#validateDateInputForRange\">validateDateInputForRange(type, value, [before], [after], format)</a> ⇒ <code>Object</code></dt>\n<dd><p>Validate text input supplied for a date range.</p>\n</dd>\n</dl>\n\n### Typedefs\n\n<dl>\n<dt><a href=\"#DateValue\">DateValue</a> : <code>Object</code></dt>\n<dd><p>DateValue Object</p>\n</dd>\n<dt><a href=\"#DateParams\">DateParams</a> : <code>Object</code></dt>\n<dd><p>DateParams Object</p>\n</dd>\n<dt><a href=\"#validatedDate\">validatedDate</a> : <code>Object</code></dt>\n<dd></dd>\n</dl>\n\n<a name=\"appendTimestamp\"></a>\n\n### appendTimestamp ⇒ <code>string</code>\nAdds timestamp to a string date.\n\n**Kind**: global constant\n**Returns**: <code>string</code> - - String date with timestamp attached.\n\n| Param | Type | Description |\n| --- | --- | --- |\n| date | <code>moment.Moment</code> | Date as a moment object. |\n| timeOfDay | <code>string</code> | Either `start`, `now` or `end` of the day. |\n\n<a name=\"getDateValue\"></a>\n\n### getDateValue ⇒ [<code>DateValue</code>](#DateValue)\nGet a DateValue object for a period described by a period, compare value, and start/end\ndates, for custom dates.\n\n**Kind**: global constant\n**Returns**: [<code>DateValue</code>](#DateValue) - - DateValue data about the selected period\n\n| Param | Type | Description |\n| --- | --- | --- |\n| period | <code>string</code> | the chosen period |\n| compare | <code>string</code> | `previous_period` or `previous_year` |\n| [after] | <code>Object</code> | after date if custom period |\n| [before] | <code>Object</code> | before date if custom period |\n\n<a name=\"getDateParamsFromQueryMemoized\"></a>\n\n### getDateParamsFromQueryMemoized ⇒ <code>Object</code>\nMemoized internal logic of getDateParamsFromQuery().\n\n**Kind**: global constant\n**Returns**: <code>Object</code> - - date parameters derived from query parameters with added defaults\n\n| Param | Type | Description |\n| --- | --- | --- |\n| period | <code>string</code> | period value, ie `last_week` |\n| compare | <code>string</code> | compare value, ie `previous_year` |\n| after | <code>string</code> | date in iso date format, ie `2018-07-03` |\n| before | <code>string</code> | date in iso date format, ie `2018-07-03` |\n| defaultDateRange | <code>string</code> | the store's default date range |\n\n<a name=\"getDateParamsFromQuery\"></a>\n\n### getDateParamsFromQuery ⇒ [<code>DateParams</code>](#DateParams)\nAdd default date-related parameters to a query object\n\n**Kind**: global constant\n**Returns**: [<code>DateParams</code>](#DateParams) - - date parameters derived from query parameters with added defaults\n\n| Param | Type | Description |\n| --- | --- | --- |\n| query | <code>Object</code> | query object |\n| query.period | <code>string</code> | period value, ie `last_week` |\n| query.compare | <code>string</code> | compare value, ie `previous_year` |\n| query.after | <code>string</code> | date in iso date format, ie `2018-07-03` |\n| query.before | <code>string</code> | date in iso date format, ie `2018-07-03` |\n| defaultDateRange | <code>string</code> | the store's default date range |\n\n<a name=\"getCurrentDatesMemoized\"></a>\n\n### getCurrentDatesMemoized ⇒ <code>Object</code>\nMemoized internal logic of getCurrentDates().\n\n**Kind**: global constant\n**Returns**: <code>Object</code> - - Primary and secondary DateValue objects\n\n| Param | Type | Description |\n| --- | --- | --- |\n| period | <code>string</code> | period value, ie `last_week` |\n| compare | <code>string</code> | compare value, ie `previous_year` |\n| primaryStart | <code>Object</code> | primary query start DateTime, in Moment instance. |\n| primaryEnd | <code>Object</code> | primary query start DateTime, in Moment instance. |\n| secondaryStart | <code>Object</code> | primary query start DateTime, in Moment instance. |\n| secondaryEnd | <code>Object</code> | primary query start DateTime, in Moment instance. |\n\n<a name=\"getCurrentDates\"></a>\n\n### getCurrentDates ⇒ <code>Object</code>\nGet Date Value Objects for a primary and secondary date range\n\n**Kind**: global constant\n**Returns**: <code>Object</code> - - Primary and secondary DateValue objects\n\n| Param | Type | Description |\n| --- | --- | --- |\n| query | <code>Object</code> | query object |\n| query.period | <code>string</code> | period value, ie `last_week` |\n| query.compare | <code>string</code> | compare value, ie `previous_year` |\n| query.after | <code>string</code> | date in iso date format, ie `2018-07-03` |\n| query.before | <code>string</code> | date in iso date format, ie `2018-07-03` |\n| defaultDateRange | <code>string</code> | the store's default date range |\n\n<a name=\"getDateDifferenceInDays\"></a>\n\n### getDateDifferenceInDays ⇒ <code>number</code>\nCalculates the date difference between two dates. Used in calculating a matching date for previous period.\n\n**Kind**: global constant\n**Returns**: <code>number</code> - - Difference in days.\n\n| Param | Type | Description |\n| --- | --- | --- |\n| date | <code>string</code> | Date to compare |\n| date2 | <code>string</code> | Seconary date to compare |\n\n<a name=\"getPreviousDate\"></a>\n\n### getPreviousDate ⇒ <code>Object</code>\nGet the previous date for either the previous period of year.\n\n**Kind**: global constant\n**Returns**: <code>Object</code> - - Calculated date\n\n| Param | Type | Description |\n| --- | --- | --- |\n| date | <code>string</code> | Base date |\n| date1 | <code>string</code> | primary start |\n| date2 | <code>string</code> | secondary start |\n| compare | <code>string</code> | `previous_period`  or `previous_year` |\n| interval | <code>string</code> | interval |\n\n<a name=\"toMoment\"></a>\n\n### toMoment(format, str) ⇒ <code>Object</code> \\| <code>null</code>\nConvert a string to Moment object\n\n**Kind**: global function\n**Returns**: <code>Object</code> \\| <code>null</code> - - Moment object representing given string\n\n| Param | Type | Description |\n| --- | --- | --- |\n| format | <code>string</code> | localized date string format |\n| str | <code>string</code> | date string |\n\n<a name=\"getRangeLabel\"></a>\n\n### getRangeLabel(after, before) ⇒ <code>string</code>\nGiven two dates, derive a string representation\n\n**Kind**: global function\n**Returns**: <code>string</code> - - text value for the supplied date range\n\n| Param | Type | Description |\n| --- | --- | --- |\n| after | <code>Object</code> | start date |\n| before | <code>Object</code> | end date |\n\n<a name=\"getStoreTimeZoneMoment\"></a>\n\n### getStoreTimeZoneMoment() ⇒ <code>string</code>\nGets the current time in the store time zone if set.\n\n**Kind**: global function\n**Returns**: <code>string</code> - - Datetime string.\n<a name=\"getLastPeriod\"></a>\n\n### getLastPeriod(period, compare) ⇒ [<code>DateValue</code>](#DateValue)\nGet a DateValue object for a period prior to the current period.\n\n**Kind**: global function\n**Returns**: [<code>DateValue</code>](#DateValue) - -  DateValue data about the selected period\n\n| Param | Type | Description |\n| --- | --- | --- |\n| period | <code>string</code> | the chosen period |\n| compare | <code>string</code> | `previous_period` or `previous_year` |\n\n<a name=\"getCurrentPeriod\"></a>\n\n### getCurrentPeriod(period, compare) ⇒ [<code>DateValue</code>](#DateValue)\nGet a DateValue object for a curent period. The period begins on the first day of the period,\nand ends on the current day.\n\n**Kind**: global function\n**Returns**: [<code>DateValue</code>](#DateValue) - -  DateValue data about the selected period\n\n| Param | Type | Description |\n| --- | --- | --- |\n| period | <code>string</code> | the chosen period |\n| compare | <code>string</code> | `previous_period` or `previous_year` |\n\n<a name=\"getAllowedIntervalsForQuery\"></a>\n\n### getAllowedIntervalsForQuery(query, defaultDateRange) ⇒ <code>Array</code>\nReturns the allowed selectable intervals for a specific query.\n\n**Kind**: global function\n**Returns**: <code>Array</code> - Array containing allowed intervals.\n\n| Param | Type | Description |\n| --- | --- | --- |\n| query | <code>Object</code> | Current query |\n| defaultDateRange | <code>string</code> | the store's default date range |\n\n<a name=\"getIntervalForQuery\"></a>\n\n### getIntervalForQuery(query, defaultDateRange) ⇒ <code>string</code>\nReturns the current interval to use.\n\n**Kind**: global function\n**Returns**: <code>string</code> - Current interval.\n\n| Param | Type | Description |\n| --- | --- | --- |\n| query | <code>Object</code> | Current query |\n| defaultDateRange | <code>string</code> | the store's default date range |\n\n<a name=\"getChartTypeForQuery\"></a>\n\n### getChartTypeForQuery(query) ⇒ <code>string</code>\nReturns the current chart type to use.\n\n**Kind**: global function\n**Returns**: <code>string</code> - Current chart type.\n\n| Param | Type | Description |\n| --- | --- | --- |\n| query | <code>Object</code> | Current query |\n| query.chartType | <code>string</code> |  |\n\n<a name=\"getDateFormatsForInterval\"></a>\n\n### getDateFormatsForInterval(interval, [ticks], [option]) ⇒ <code>string</code>\nReturns date formats for the current interval.\n\n**Kind**: global function\n**Returns**: <code>string</code> - Current interval.\n\n| Param | Type | Description |\n| --- | --- | --- |\n| interval | <code>string</code> | Interval to get date formats for. |\n| [ticks] | <code>number</code> | Number of ticks the axis will have. |\n| [option] | <code>Object</code> | Options |\n| [option.type] | <code>string</code> | Date format type, d3 or php, defaults to d3. |\n\n<a name=\"getDateFormatsForIntervalD3\"></a>\n\n### getDateFormatsForIntervalD3(interval, [ticks]) ⇒ <code>string</code>\nReturns d3 date formats for the current interval.\nSee https://github.com/d3/d3-time-format for chart formats.\n\n**Kind**: global function\n**Returns**: <code>string</code> - Current interval.\n\n| Param | Type | Description |\n| --- | --- | --- |\n| interval | <code>string</code> | Interval to get date formats for. |\n| [ticks] | <code>number</code> | Number of ticks the axis will have. |\n\n<a name=\"getDateFormatsForIntervalPhp\"></a>\n\n### getDateFormatsForIntervalPhp(interval, [ticks]) ⇒ <code>string</code>\nReturns php date formats for the current interval.\nSee see https://www.php.net/manual/en/datetime.format.php.\n\n**Kind**: global function\n**Returns**: <code>string</code> - Current interval.\n\n| Param | Type | Description |\n| --- | --- | --- |\n| interval | <code>string</code> | Interval to get date formats for. |\n| [ticks] | <code>number</code> | Number of ticks the axis will have. |\n\n<a name=\"loadLocaleData\"></a>\n\n### loadLocaleData(config)\nGutenberg's moment instance is loaded with i18n values, which are\nPHP date formats, ie 'LLL: \"F j, Y g:i a\"'. Override those with translations\nof moment style js formats.\n\n**Kind**: global function\n\n| Param | Type | Description |\n| --- | --- | --- |\n| config | <code>Object</code> | Locale config object, from store settings. |\n| config.userLocale | <code>string</code> |  |\n| config.weekdaysShort | <code>Array</code> |  |\n\n<a name=\"validateDateInputForRange\"></a>\n\n### validateDateInputForRange(type, value, [before], [after], format) ⇒ <code>Object</code>\nValidate text input supplied for a date range.\n\n**Kind**: global function\n**Returns**: <code>Object</code> - validatedDate - validated date object\n\n| Param | Type | Description |\n| --- | --- | --- |\n| type | <code>string</code> | Designate beginning or end of range, eg `before` or `after`. |\n| value | <code>string</code> | User input value |\n| [before] | <code>Object</code> \\| <code>null</code> | If already designated, the before date parameter |\n| [after] | <code>Object</code> \\| <code>null</code> | If already designated, the after date parameter |\n| format | <code>string</code> | The expected date format in a user's locale |\n\n<a name=\"DateValue\"></a>\n\n### DateValue : <code>Object</code>\nDateValue Object\n\n**Kind**: global typedef\n**Properties**\n\n| Name | Type | Description |\n| --- | --- | --- |\n| label | <code>string</code> | The translated value of the period. |\n| range | <code>string</code> | The human readable value of a date range. |\n| after | <code>moment.Moment</code> | Start of the date range. |\n| before | <code>moment.Moment</code> | End of the date range. |\n\n<a name=\"DateParams\"></a>\n\n### DateParams : <code>Object</code>\nDateParams Object\n\n**Kind**: global typedef\n\n| Param | Type | Description |\n| --- | --- | --- |\n| after | <code>moment.Moment</code> \\| <code>null</code> | If the period supplied is \"custom\", this is the after date |\n| before | <code>moment.Moment</code> \\| <code>null</code> | If the period supplied is \"custom\", this is the before date |\n\n**Properties**\n\n| Name | Type | Description |\n| --- | --- | --- |\n| period | <code>string</code> | period value, ie `last_week` |\n| compare | <code>string</code> | compare valuer, ie previous_year |\n\n<a name=\"validatedDate\"></a>\n\n### validatedDate : <code>Object</code>\n**Kind**: global typedef\n**Properties**\n\n| Name | Type | Description |\n| --- | --- | --- |\n| date | <code>Object</code> \\| <code>null</code> | A resulting Moment date object or null, if invalid |\n| error | <code>string</code> | An optional error message if date is invalid |\n"
}