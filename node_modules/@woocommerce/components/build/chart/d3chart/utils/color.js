"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getColor = void 0;
/**
 * External dependencies
 */
const lodash_1 = require("lodash");
const hooks_1 = require("@wordpress/hooks");
/**
 * Internal dependencies
 */
const constants_1 = require("../../constants");
const getColor = (orderedKeys, colorScheme) => (key) => {
    const len = orderedKeys.length > constants_1.selectionLimit
        ? constants_1.selectionLimit
        : orderedKeys.length;
    const idx = (0, lodash_1.findIndex)(orderedKeys, (d) => d.key === key);
    /**
     * Color to be used for a chart item.
     *
     * @filter woocommerce_admin_chart_item_color
     * @example
     * addFilter(
     * 	'woocommerce_admin_chart_item_color',
     * 	'example',
     * ( idx ) => {
     * 	const colorScales = [
     *	  "#0A2F51",
     *	  "#0E4D64",
     *	  "#137177",
     *	  "#188977",
     *	];
     * 	return colorScales[ idx ] || false;
     * });
     *
     */
    const color = (0, hooks_1.applyFilters)('woocommerce_admin_chart_item_color', idx, key, orderedKeys);
    if (color && color.toString().startsWith('#')) {
        return color;
    }
    const keyValue = idx <= constants_1.selectionLimit - 1 ? constants_1.colorScales[len][idx] : 0;
    return colorScheme(keyValue);
};
exports.getColor = getColor;
