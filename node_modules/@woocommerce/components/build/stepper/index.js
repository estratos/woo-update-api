"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Stepper = void 0;
/**
 * External dependencies
 */
const classnames_1 = __importDefault(require("classnames"));
const element_1 = require("@wordpress/element");
/**
 * Internal dependencies
 */
const spinner_1 = __importDefault(require("../spinner"));
const check_icon_1 = __importDefault(require("./check-icon"));
/**
 * A stepper component to indicate progress in a set number of steps.
 */
const Stepper = ({ className, currentStep, steps, isVertical = false, isPending = false, }) => {
    const renderCurrentStepContent = () => {
        const step = steps.find((s) => currentStep === s.key);
        if (!step || !step.content) {
            return null;
        }
        return ((0, element_1.createElement)("div", { className: "woocommerce-stepper_content" }, step.content));
    };
    const currentIndex = steps.findIndex((s) => currentStep === s.key);
    const stepperClassName = (0, classnames_1.default)('woocommerce-stepper', className, {
        'is-vertical': isVertical,
    });
    return ((0, element_1.createElement)("div", { className: stepperClassName },
        (0, element_1.createElement)("div", { className: "woocommerce-stepper__steps" }, steps.map((step, i) => {
            const { key, label, description, isComplete, onClick } = step;
            const isCurrentStep = key === currentStep;
            const stepClassName = (0, classnames_1.default)('woocommerce-stepper__step', {
                'is-active': isCurrentStep,
                'is-complete': typeof isComplete !== 'undefined'
                    ? isComplete
                    : currentIndex > i,
            });
            const icon = isCurrentStep && isPending ? ((0, element_1.createElement)(spinner_1.default, null)) : ((0, element_1.createElement)("div", { className: "woocommerce-stepper__step-icon" },
                (0, element_1.createElement)("span", { className: "woocommerce-stepper__step-number" }, i + 1),
                (0, element_1.createElement)(check_icon_1.default, null)));
            const LabelWrapper = typeof onClick === 'function' ? 'button' : 'div';
            return ((0, element_1.createElement)(element_1.Fragment, { key: key },
                (0, element_1.createElement)("div", { className: stepClassName },
                    (0, element_1.createElement)(LabelWrapper, { className: "woocommerce-stepper__step-label-wrapper", onClick: typeof onClick === 'function'
                            ? () => onClick(key)
                            : undefined },
                        icon,
                        (0, element_1.createElement)("div", { className: "woocommerce-stepper__step-text" },
                            (0, element_1.createElement)("span", { className: "woocommerce-stepper__step-label" }, label),
                            description && ((0, element_1.createElement)("span", { className: "woocommerce-stepper__step-description" }, description)))),
                    isCurrentStep &&
                        isVertical &&
                        renderCurrentStepContent()),
                !isVertical && ((0, element_1.createElement)("div", { className: "woocommerce-stepper__step-divider" }))));
        })),
        !isVertical && renderCurrentStepContent()));
};
exports.Stepper = Stepper;
exports.default = exports.Stepper;
